<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poker Reveal - Pro X</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-glow: 0 0 15px rgba(22, 163, 74, 0.4), 0 0 5px rgba(22, 163, 74, 0.6);
            --font-orbitron: 'Orbitron', sans-serif;
            --font-inter: 'Inter', sans-serif;
        }
        body {
            font-family: var(--font-inter);
            background-color: #0a0a0a;
        }
        .font-orbitron {
            font-family: var(--font-orbitron);
        }
        .main-container {
            background: radial-gradient(circle, #1f2937, #111827);
            border: 1px solid #374151;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5), var(--primary-glow);
        }
        .custom-select {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }
        .console-scrollbar::-webkit-scrollbar { width: 4px; }
        .console-scrollbar::-webkit-scrollbar-track { background: #1f2937; }
        .console-scrollbar::-webkit-scrollbar-thumb { background: #16a34a; border-radius: 2px; }

        .card {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 60px;
            height: 90px;
            border-radius: 6px;
            font-weight: bold;
            font-size: 22px;
            position: relative;
            background: white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        @media (min-width: 640px) { /* sm breakpoint */
            .card {
                width: 70px;
                height: 100px;
                font-size: 24px;
            }
        }
        .card.red { color: #ef4444; }
        .card.black { color: #111827; }
        .card-suit { position: absolute; font-size: 14px; }
        .card-rank-top { top: 4px; left: 6px; }
        .card-rank-bottom { bottom: 4px; right: 6px; transform: rotate(180deg); }
        .card-suit-center { font-size: 32px; }
    </style>
</head>
<body class="bg-black text-gray-200 flex items-center justify-center min-h-screen p-2 sm:p-4">

    <main class="main-container w-full max-w-3xl rounded-2xl overflow-hidden">
        <header class="p-4 sm:p-6 border-b border-gray-700 text-center">
            <h1 class="text-2xl sm:text-3xl font-orbitron font-black text-green-400 tracking-wider">
                POKER REVEAL <span class="text-sm sm:text-base align-middle text-green-300">X</span>
            </h1>
            <p class="text-gray-400 text-xs sm:text-sm mt-1">See your opponents' cards.</p>
        </header>

        <section id="setup-screen" class="p-4 sm:p-6 space-y-4 sm:space-y-6">
            <!-- Game Info Inputs -->
            <div>
                <label for="platform-select" class="block text-sm font-medium text-gray-400 mb-2">Platform</label>
                <select id="platform-select" class="w-full bg-gray-900 border border-gray-600 rounded-md px-3 py-2 text-gray-200 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition custom-select">
                    <option value="" disabled selected>Select a platform</option>
                    <option value="pppoker">PPPOKER</option>
                    <option value="xpoker">XPOKER</option>
                    <option value="clubgg">CLUBGG</option>
                </select>
            </div>
             <div>
                <label for="table-id" class="block text-sm font-medium text-gray-400 mb-2">Table / Club ID</label>
                <input type="text" id="table-id" class="w-full bg-gray-900 border border-gray-600 rounded-md px-3 py-2 text-gray-200 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition placeholder-gray-500" placeholder="e.g., 12345678">
            </div>
            <div>
                <label for="num-players" class="block text-sm font-medium text-gray-400 mb-2">Number of Opponents</label>
                <select id="num-players" class="w-full bg-gray-900 border border-gray-600 rounded-md px-3 py-2 text-gray-200 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition custom-select">
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option selected>5</option>
                    <option>6</option>
                    <option>7</option>
                    <option>8</option>
                </select>
            </div>

            <!-- Action Button -->
            <button id="reveal-btn" class="w-full bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 shadow-lg shadow-green-500/20 flex items-center justify-center space-x-2 text-lg">
                <span>Reveal Cards</span>
            </button>
        </section>

        <!-- Results Screen -->
        <section id="results-screen" class="p-4 sm:p-6 border-t border-gray-700 hidden">
            <!-- Console Log -->
            <div id="console-output" class="bg-black/50 rounded-lg p-4 h-32 overflow-y-auto mb-6 font-mono text-xs console-scrollbar"></div>

            <!-- Revealed Cards -->
            <h2 class="text-lg font-bold text-center text-green-400 mb-4">Revealed Hands</h2>
            <div id="cards-display" class="flex flex-wrap justify-center gap-4"></div>
            
             <!-- Action Buttons after reveal -->
            <footer id="action-buttons" class="mt-8 flex flex-col sm:flex-row justify-center items-center gap-4"></footer>
        </section>
    </main>
    
    <!-- Custom Alert Modal -->
    <div id="custom-alert" class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 hidden z-50">
        <div class="bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm text-center border border-yellow-500">
            <p id="custom-alert-message" class="text-white mb-4">Message goes here.</p>
            <button id="custom-alert-close" class="bg-yellow-500 hover:bg-yellow-400 text-gray-900 font-bold py-2 px-6 rounded-lg transition">OK</button>
        </div>
    </div>


    <script>
        // DOM Elements
        const setupScreen = document.getElementById('setup-screen');
        const resultsScreen = document.getElementById('results-screen');
        const revealBtn = document.getElementById('reveal-btn');
        const platformSelect = document.getElementById('platform-select');
        const tableIdInput = document.getElementById('table-id');
        const numPlayersSelect = document.getElementById('num-players');
        const consoleOutput = document.getElementById('console-output');
        const cardsDisplay = document.getElementById('cards-display');
        const actionButtons = document.getElementById('action-buttons');
        // Custom Alert Elements
        const customAlert = document.getElementById('custom-alert');
        const customAlertMessage = document.getElementById('custom-alert-message');
        const customAlertClose = document.getElementById('custom-alert-close');

        // Card and timer data
        const SUITS = ['♠', '♥', '♦', '♣'];
        const RANKS = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
        let deck = [];
        let nextHandTime = 0; // Timestamp for the next allowed "New Hand" click

        // Helper Functions
        const delay = (ms) => new Promise(res => setTimeout(res, ms));
        const createDeck = () => SUITS.flatMap(suit => RANKS.map(rank => ({ suit, rank })));
        const shuffleDeck = () => {
            deck = createDeck();
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
        };
        const generateRandomHash = (length = 64) => {
            const chars = 'abcdef0123456789';
            let result = '';
            for (let i = 0; i < length; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        };

        // UI Functions
        function createCardHTML({ suit, rank }) {
            const colorClass = (suit === '♥' || suit === '♦') ? 'red' : 'black';
            return `
                <div class="card ${colorClass}">
                    <span class="card-suit card-rank-top">${rank}${suit}</span>
                    <span class="card-suit-center">${suit}</span>
                    <span class="card-suit card-rank-bottom">${rank}${suit}</span>
                </div>`;
        }
        
        async function logMessage(message) {
            const p = document.createElement('p');
            p.innerHTML = `<span class="text-green-400">&gt;</span> ${message}`;
            consoleOutput.appendChild(p);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }

        // Custom alert function
        function showAlert(message) {
            customAlertMessage.textContent = message;
            customAlert.classList.remove('hidden');
        }

        function validateInputs() {
            if (platformSelect.value === "") {
                showAlert("Please select a platform.");
                return false;
            }
            if (!tableIdInput.value) {
                showAlert("Please enter the table ID.");
                return false;
            }
            return true;
        }

        function setButtonLoading(isLoading) {
             if (isLoading) {
                revealBtn.disabled = true;
                revealBtn.innerHTML = `
                    <svg class="animate-spin h-5 w-5 mr-3" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                    <span>Processing...</span>`;
            } else {
                revealBtn.disabled = false;
                revealBtn.innerHTML = `<span>Reveal Cards</span>`;
            }
        }
        
        async function dealHands() {
            cardsDisplay.innerHTML = '';
            shuffleDeck();
            const numOpponents = parseInt(numPlayersSelect.value, 10);
            
            for (let i = 0; i < numOpponents; i++) {
                const hand = [deck.pop(), deck.pop()];
                const opponentDiv = document.createElement('div');
                opponentDiv.className = 'bg-gray-800/50 p-3 rounded-lg flex flex-col items-center space-y-2';
                opponentDiv.innerHTML = `
                    <h3 class="font-bold text-gray-300 text-sm">Opponent ${i + 1}</h3>
                    <div class="flex space-x-2">
                        ${createCardHTML(hand[0])}
                        ${createCardHTML(hand[1])}
                    </div>`;
                cardsDisplay.appendChild(opponentDiv);
                await delay(50); 
            }
            nextHandTime = Date.now() + 60000;
        }

        function handleNewHandClick() {
            if (Date.now() < nextHandTime) {
                showAlert("Please wait for the current hand to finish before requesting a new one.");
            } else {
                dealHands();
            }
        }
        
        function showActionButtons() {
            actionButtons.innerHTML = `
                <button id="new-hand-btn" class="w-full sm:w-auto bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-5 rounded-lg transition">New Hand</button>
                <button id="new-game-btn" class="w-full sm:w-auto bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-5 rounded-lg transition">New Game</button>
            `;
            document.getElementById('new-hand-btn').addEventListener('click', handleNewHandClick);
            document.getElementById('new-game-btn').addEventListener('click', resetGame);
        }

        function resetGame() {
            resultsScreen.classList.add('hidden');
            setupScreen.classList.remove('hidden');
            tableIdInput.value = '';
            platformSelect.value = '';
            consoleOutput.innerHTML = '';
            cardsDisplay.innerHTML = '';
            actionButtons.innerHTML = '';
            nextHandTime = 0;
        }

        async function handleReveal() {
            if (!validateInputs()) return;

            setButtonLoading(true);
            setupScreen.classList.add('hidden');
            resultsScreen.classList.remove('hidden');
            consoleOutput.innerHTML = '';
            cardsDisplay.innerHTML = '';
            actionButtons.innerHTML = '';
            
            const platform = platformSelect.options[platformSelect.selectedIndex].text;
            
            await logMessage(`Initiating connection to ${platform} platform...`);
            await delay(1000);
            await logMessage(`Target locked: Table ${tableIdInput.value}`);
            await delay(500);
            await logMessage('Analyzing security protocols...');
            await delay(1500);
            await logMessage('<span class="text-green-400">Access granted.</span>');
            await delay(500);
            await logMessage('Reading encrypted hand data...');
            await delay(1200);
            const randomHash = generateRandomHash();
            await logMessage(`Data hash found: <span class="text-yellow-400">${randomHash}</span>`);
            await delay(1200);
            await logMessage('<span class="text-green-400">Decryption successful.</span>');
            await delay(300);
            await logMessage('Revealing opponent hands...');
            await delay(500);

            await dealHands();
            
            setButtonLoading(false);
            showActionButtons();
        }

        // Event Listeners
        revealBtn.addEventListener('click', handleReveal);
        customAlertClose.addEventListener('click', () => {
            customAlert.classList.add('hidden');
        });
        
        // Initial setup
        shuffleDeck();
    </script>
</body>
</html>
