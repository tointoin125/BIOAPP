<!--
This page is a simplified and modified version of the original work by Vitor (@vitorguedes) from https://github.com/vitorguedes/chat-funnel-template
-->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Reveal Poker - Your Unfair Advantage</title>
  <meta name="application-name" content="Reveal Poker">
  <meta name="apple-mobile-web-app-title" content="Reveal Poker">
  <meta name="theme-color" content="#0a7c66">
  <meta name="msapplication-TileColor" content="#0a7c66">

  <!-- Using a generic person SVG for the favicon for a clean, self-contained icon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2'></path><circle cx='12' cy='7' r='4'></circle></svg>" type="image/svg+xml">

  <link rel="preload" href="style_improved.css" as="style">
  <link id="main-css" rel="stylesheet" href="style_improved.css">

  <style>
    html { background:#e5ddd5; }
    .app { opacity:0 }
    html.css-ready .app { opacity:1; transition:opacity .18s ease }
    .avatar { opacity:0; transition:opacity .18s ease }
    .avatar.is-loaded { opacity:1 }
  </style>

  <script>
    (function(){
      var link = document.getElementById('main-css');
      function ready(){ document.documentElement.classList.add('css-ready'); }
      if (link && (link.sheet || link.matches?.(':loaded'))) {
        ready();
      } else if (link) {
        link.addEventListener('load', ready, { once: true });
      }
      window.addEventListener('load', ready, { once: true });
    })();
  </script>

  <!-- Preloading the new generic avatar image -->
  <link rel="preload" as="image" href="https://i.pravatar.cc/40?img=12">
  <link rel="preload" as="image" href="assets/poker_hand.jpg">
  <link rel="preload" as="audio" href="assets/intro.mp3" crossorigin>

</head>
<body>
  <div class="app">
    <header class="wpp-header">
      <div class="left">
        <button class="back" aria-label="Back" title="Back">←</button>

        <!-- Replaced local avatar with a generic user photo from a placeholder service -->
        <img
          class="avatar"
          id="avatar"
          src="https://i.pravatar.cc/40?img=12"
          alt="Generic user avatar"
          width="40"
          height="40"
          decoding="async"
          fetchpriority="high"
          onload="this.classList.add('is-loaded')"
        />

        <div class="meta">
          <div class="name" id="contact-name">Alex</div>
          <div class="status" id="status">Online</div>
        </div>
      </div>
      <div class="right">
        <button class="icon-btn" aria-label="Video Call" title="Video Call">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <rect x="3" y="5" width="12" height="14" rx="2" ry="2" fill="currentColor"/>
            <path d="M16 10l5-3v10l-5-3z" fill="currentColor"/>
          </svg>
        </button>
        <button class="icon-btn" aria-label="Voice Call" title="Voice Call">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M6.62 10.79a15.05 15.05 0 0 0 6.59 6.59l2.2-2.2a1 1 0 0 1 1.05-.24 11.4 11.4 0 0 0 3.58 .57 1 1 0 0 1 1 1V20a1 1 0 0 1-1 1A17 17 0 0 1 3 7a1 1 0 0 1 1-1h3.5a1 1 0 0 1 1 1 11.4 11.4 0 0 0 .57 3.58 1 1 0 0 1-.24 1.05l-2.21 2.16z" fill="currentColor"/>
          </svg>
        </button>
        <button class="icon-btn" aria-label="More options" title="More options">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <circle cx="12" cy="5" r="1.8" fill="currentColor"/>
            <circle cx="12" cy="12" r="1.8" fill="currentColor"/>
            <circle cx="12" cy="19" r="1.8" fill="currentColor"/>
          </svg>
        </button>
      </div>
    </header>

    <main id="messages" class="messages">
    </main>

    <form id="chat-form" class="inputbar" autocomplete="off">
      <input id="chat-input" type="text" placeholder="Write a message" />
      <button type="submit" aria-label="Send">➤</button>
    </form>
  </div>

  <script src="chat.js"></script>

</body>
</html>

